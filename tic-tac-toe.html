<html>
  <head>
    <title>Tic-Tac-Toe</title>
    <style>
      table button { width: 30px; height: 30px; border:0; }
      table { margin: 1em}
    </style>
  </head>
<body>
  
<p id="msg">Click to play</p>

<table border=1 cellspacing=0 cellpadding=4>
  <tr>
    <td><button></button>
    <td><button></button>
    <td><button></button>
  <tr>
    <td><button></button>
    <td><button></button>
    <td><button></button>
  <tr>
    <td><button></button>
    <td><button></button>
    <td><button></button>
</table>
      
      <button id=restart>Start over</button>
  
  <script>
var currentPlayer = 'X';

msg = document.querySelector('#msg');

function switchPlayer() {
  currentPlayer = (currentPlayer == 'X') ? 'O' : 'X';
  msg.innerText = 'Player ' + currentPlayer + ': it is your turn';
}

function detectWin() {
  var s = Array.from(squares).map((sq) => sq.innerText);
  // rows
  if (s[0] && s[0] == s[1] && s[1]== s[2]) return s[0];
  if (s[3] && s[3] == s[4] && s[4] == s[5]) return s[5];
  if (s[6]&& s[6] == s[7] && s[7]== s[8]) return s[8];
  
  // cols
    if (s[0] && s[0] == s[3] && s[3]== s[6]) return s[0];
  if (s[1] && s[1] == s[4] && s[4] == s[7]) return s[5];
  if (s[2]&& s[2] == s[5] && s[5]== s[8]) return s[8];

  // diagonals
  if (s[0]&& s[0] == s[4] && s[4]== s[8]) return s[8];
    if (s[2]&& s[2] == s[4] && s[4]== s[6]) return s[6];

  
    if (s.filter(sp => sp == '').length == 0) 
  return 'Cat';
}

function onClick(e) {
  var t = e.target;
  if (!t.innerText) {
    e.target.innerText = currentPlayer;
    winner = detectWin();
    if (winner) {
      msg.innerText = winner + ' has won!';
    }
    else {
      switchPlayer();
    }
  }
}
var squares =  document.querySelectorAll('table button');

squares.forEach((b) => b.addEventListener('click', onClick));

document.querySelector('#restart').addEventListener('click', (e) => {
  squares.forEach((s) => s.innerText = '');
  switchPlayer();
})
  </script>
  </body>
</html>
